(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b8d2f78"],{2957:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"publish"},[n("Panel",{scopedSlots:e._u([{key:"header",fn:function(){return[n("router-link",{staticClass:"gohome",attrs:{to:"/"}},[e._v("首页")]),n("span",{staticClass:"xx"},[e._v("/")]),n("span",{staticClass:"sconent"},[e._v(e._s(e.id?"编辑话题":"发布话题"))])]},proxy:!0},{key:"content",fn:function(){return[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[n("el-form-item",{attrs:{label:"模块选择",prop:"tab"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.tab,callback:function(t){e.$set(e.form,"tab",t)},expression:"form.tab"}},[n("el-option",{attrs:{label:"分享",value:"share"}}),n("el-option",{attrs:{label:"问答",value:"ask"}}),n("el-option",{attrs:{label:"招聘",value:"job"}}),n("el-option",{attrs:{label:"客户端测试",value:"dev"}})],1)],1),n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),n("el-form-item",[n("mavon-editor",{staticClass:"markdown",attrs:{subfield:!1,autofocus:!1,transition:!1},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.publish}},[e._v("提交")])],1)],1)]},proxy:!0}])})],1)},i=[],a=n("5530"),o=n("1da1"),l=(n("96cf"),n("f34a")),u=n("2f62");function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function c(e,t){return Array(t+1).join(e)}function f(e){return e.replace(/^\n*/,"")}function d(e){var t=e.length;while(t>0&&"\n"===e[t-1])t--;return e.substring(0,t)}var p=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function m(e){return A(e,p)}var h=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function g(e){return A(e,h)}function v(e){return w(e,h)}var b=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function k(e){return A(e,b)}function y(e){return w(e,b)}function A(e,t){return t.indexOf(e.nodeName)>=0}function w(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var E={};function N(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function T(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function C(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(R(i,t,n))return i}}function R(e,t,n){var r=e.filter;if("string"===typeof r){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!==typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(e,t,n))return!0}}function O(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!i(t)){var a=null,o=!1,l=null,u=D(l,t,i);while(u!==t){if(3===u.nodeType||4===u.nodeType){var s=u.data.replace(/[ \r\n\t]+/g," ");if(a&&!/ $/.test(a.data)||o||" "!==s[0]||(s=s.substr(1)),!s){u=x(u);continue}u.data=s,a=u}else{if(1!==u.nodeType){u=x(u);continue}n(u)||"BR"===u.nodeName?(a&&(a.data=a.data.replace(/ $/,"")),a=null,o=!1):r(u)||i(u)?(a=null,o=!0):a&&(o=!1)}var c=D(l,u,i);l=u,u=c}a&&(a.data=a.data.replace(/ $/,""),a.data||x(a))}}function x(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function D(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}E.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},E.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+"\n"}},E.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if("setext"===n.headingStyle&&r<3){var i=c(1===r?"=":"-",e.length);return"\n\n"+e+"\n"+i+"\n\n"}return"\n\n"+c("#",r)+" "+e+"\n\n"}},E.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),"\n\n"+e+"\n\n"}},E.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return"LI"===n.nodeName&&n.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},E.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=t.parentNode;if("OL"===i.nodeName){var a=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,t);r=(a?Number(a)+o:o+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},E.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},E.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){var r,i=t.firstChild.getAttribute("class")||"",a=(i.match(/language-(\S+)/)||[null,""])[1],o=t.firstChild.textContent,l=n.fence.charAt(0),u=3,s=new RegExp("^"+l+"{3,}","gm");while(r=s.exec(o))r[0].length>=u&&(u=r[0].length+1);var f=c(l,u);return"\n\n"+f+a+"\n"+o.replace(/\n$/,"")+"\n"+f+"\n\n"}},E.horizontalRule={filter:"hr",replacement:function(e,t,n){return"\n\n"+n.hr+"\n\n"}},E.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),r=N(t.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+e+"]("+n+r+")"}},E.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,n){var r,i,a=t.getAttribute("href"),o=N(t.getAttribute("title"));switch(o&&(o=' "'+o+'"'),n.linkReferenceStyle){case"collapsed":r="["+e+"][]",i="["+e+"]: "+a+o;break;case"shortcut":r="["+e+"]",i="["+e+"]: "+a+o;break;default:var l=this.references.length+1;r="["+e+"]["+l+"]",i="["+l+"]: "+a+o}return this.references.push(i),r},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},E.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},E.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},E.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];while(-1!==r.indexOf(n))n+="`";return n+t+e+t+n}},E.image={filter:"img",replacement:function(e,t){var n=N(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=N(t.getAttribute("title")),a=i?' "'+i+'"':"";return r?"!["+n+"]("+r+a+")":""}},T.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=C(this.array,e,this.options))||(t=C(this._keep,e,this.options))||(t=C(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var S="undefined"!==typeof window?window:{};function B(){var e=S.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(n){}return t}function I(){var e=function(){};return $()?e.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:e.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},e}function $(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){window.ActiveXObject&&(e=!0)}return e}var L,M=B()?S.DOMParser:I();function P(e,t){var n;if("string"===typeof e){var r=H().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return O({element:n,isBlock:m,isVoid:g,isPre:t.preformattedCode?_:null}),n}function H(){return L=L||new M,L}function _(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function F(e,t){return e.isBlock=m(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=j(e),e.flankingWhitespace=U(e,t),e}function j(e){return!g(e)&&!k(e)&&/^\s*$/i.test(e.textContent)&&!v(e)&&!y(e)}function U(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=V(e.textContent);return n.leadingAscii&&G("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&G("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function V(e){var t=e.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function G(e,t,n){var r,i,a;return"left"===e?(r=t.previousSibling,i=/ $/):(r=t.nextSibling,i=/^ /),r&&(3===r.nodeType?a=i.test(r.nodeValue):n.preformattedCode&&"CODE"===r.nodeName?a=!1:1!==r.nodeType||m(r)||(a=i.test(r.textContent))),a}var q=Array.prototype.reduce,K=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Y(e){if(!(this instanceof Y))return new Y(e);var t={rules:E,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=s({},t,e),this.rules=new T(this.options)}function W(e){var t=this;return q.call(e.childNodes,(function(e,n){n=new F(n,t.options);var r="";return 3===n.nodeType?r=n.isCode?n.nodeValue:t.escape(n.nodeValue):1===n.nodeType&&(r=z.call(t,n)),J(e,r)}),"")}function X(e){var t=this;return this.rules.forEach((function(n){"function"===typeof n.append&&(e=J(e,n.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function z(e){var t=this.rules.forNode(e),n=W.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function J(e,t){var n=d(e),r=f(t),i=Math.max(e.length-n.length,t.length-r.length),a="\n\n".substring(0,i);return n+a+r}function Q(e){return null!=e&&("string"===typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}Y.prototype={turndown:function(e){if(!Q(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=W.call(this,new P(e,this.options));return X.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!==typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return K.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};var Z=Y,ee={components:{Panel:l["a"]},props:["id"],created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=6;break}return t.next=3,e.getDetails(e.id);case 3:e.form=e.details,n=new Z,e.form.content=n.turndown(e.form.content);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{form:{tab:"",title:"",content:""},rules:{tab:{required:!0,message:"请输入活动名称",trigger:"change"},title:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:6,max:30,message:"长度在6 到 30个字符",trigger:"blur"}]}}},computed:Object(a["a"])({},Object(u["d"])({details:function(e){return e.details.value}})),methods:Object(a["a"])({publish:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=15;break}if(r=window.localStorage.getItem("token"),i="",!e.id){t.next=10;break}return t.next=6,e.$axios.post("/topics/update",Object(a["a"])({accesstoken:r,topic_id:e.id},e.form));case 6:i=t.sent,e.$message.success("修改成功"),t.next=14;break;case 10:return t.next=12,e.$axios.post("/topics",Object(a["a"])({accesstoken:r},e.form));case 12:i=t.sent,e.$message.success("发布成功");case 14:e.$router.push({name:"details",params:{id:i.topic_id}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},Object(u["b"])(["getDetails"]))},te=ee,ne=(n("9fb1"),n("2877")),re=Object(ne["a"])(te,r,i,!1,null,null,null);t["default"]=re.exports},"9fb1":function(e,t,n){"use strict";n("aca3")},aca3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-4b8d2f78.8637cb32.js.map